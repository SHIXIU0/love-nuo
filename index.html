<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>ç»™è¯ºè¯ºçš„å¼€å¿ƒç©ºæŠ•</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href='data:application/json,{ "name":"å¼€å¿ƒè¯ºè¯º","short_name":"è¯ºè¯º","start_url":"/","display":"standalone","background_color":"#000","theme_color":"#d11090","icons":[{"src":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI5NiIgY3k9Ijk2IiByPSI5NiIgZmlsbD0iI2QxMTA5MCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjEyMCIgZmlsbD0iI2ZmZiIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+YijwvdGV4dD48L3N2Zz4=","sizes":"192x192","type":"image/svg+xml"}]}'>

  <!-- å½©è™¹æ‰«å…‰å­—æ ·å¼ -->
  <style>
    /* åŸºç¡€ reset */
    *{margin:0;padding:0;box-sizing:border-box}
    body,html{width:100%;height:100%;overflow:hidden;font-family:"Poppins",sans-serif;display:flex;justify-content:center;align-items:center;background:#000}

    /* èƒŒæ™¯è§†é¢‘ */
    video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}

    /* å½©è™¹æ‰«å…‰å­— */
    #rainbow{
      position:absolute;
      font-size:clamp(2em,8vw,4em);
      color:#fff;
      text-align:center;
      pointer-events:none;        /* ä¸æŒ¡ç‚¹å‡» */
    }
    #rainbow::after{
      content:attr(data-text);
      position:absolute;
      left:0;top:0;
      width:100%;height:100%;
      background:linear-gradient(90deg,#c23616,#192a56,#00d2d3,yellow,#6d214f,#2e86de,#4cd137,#e84118);
      background-clip:text;
      -webkit-background-clip:text;
      color:transparent;
      clip-path:circle(120px at 0 50%);
      animation:move 4s linear infinite;
    }
    @keyframes move{50%{clip-path:circle(120px at 100% 50%)}}

    /* èƒŒæ™¯æ¸å˜åŠ¨ç”»ï¼ˆå¤‡ç”¨ï¼‰ */
    @keyframes hue{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
  </style>
</head>

<body>
  <!-- åŠ¨æ€èƒŒæ™¯ -->
  <video id="bg" autoplay muted loop playsinline></video>

  <!-- å½©è™¹æ‰«å…‰å­—å¹• -->
  <h1 data-text="å¸Œæœ›è¯ºè¯ºå¤©å¤©å¼€å¿ƒï¼" id="rainbow"></h1>

  <!-- èƒŒæ™¯éŸ³ä¹ -->
  <audio id="bgm" loop></audio>

  <script>
    /* ===== 1. éšæœºæ–‡æ¡ˆæ±  ===== */
    const wishes = [
      "å¸Œæœ›è¯ºè¯ºå¤©å¤©å¼€å¿ƒï¼",
      "ä»Šå¤©ä¹Ÿè¦æ¯”æ˜¨å¤©æ›´å¿«ä¹å‘€ï½",
      "ä½ ä¸€ç¬‘ï¼Œä¸–ç•Œå°±äº®äº†âœ¨",
      "æŠŠçƒ¦æ¼è°ƒæˆé™éŸ³ğŸ”‡",
      "è¯ºè¯ºçš„è¶…èƒ½åŠ›ï¼šç§’å˜å¼€å¿ƒï¼"
    ];
    // æŠŠéšæœºæ–‡æ¡ˆå†™è¿›å½©è™¹å­—å¹•çš„ data-textï¼Œå®ç°æ¯æ¬¡åˆ·æ–°ä¸åŒ
    document.getElementById('rainbow').setAttribute('data-text', wishes[Math.floor(Math.random()*wishes.length)]);

    /* ===== 2. éšæœºèƒŒæ™¯ï¼ˆè§†é¢‘/å›¾ç‰‡åŒä¿é™©ï¼‰ ===== */
    const videos = [
      "https://cdn.jsdelivr.net/gh/verlok/doge@main/dynamic/christmas.mp4",
      "https://cdn.jsdelivr.net/gh/verlok/doge@main/dynamic/rainbow.mp4"
    ];
    const imgFallback = "https://source.unsplash.com/1600x900/?rainbow,smile";
    const vid = document.getElementById('bg');
    vid.src = videos[Math.floor(Math.random()*videos.length)];
    vid.onerror = () => {                       // CDN æŒ‚äº†å°±æ¢å›¾ç‰‡+æ¸å˜
      vid.style.display='none';
      document.body.style.background=`url(${imgFallback}) center/cover no-repeat fixed`;
      document.body.style.animation='hue 8s infinite';
    };

    /* ===== 3. é˜³å…‰éŸ³ä¹ CDN ===== */
    const bgm = document.getElementById('bgm');
    bgm.src = "https://cdn.jsdelivr.net/gh/verlok/doge@main/mp3/sunny.mp3";
    bgm.onerror=()=> bgm.src="https://cdn.jsdelivr.net/gh/verlok/doge@main/mp3/happy.mp3";

    /* ===== 4. é¦–æ¬¡ç‚¹å‡»æ’­æ”¾ ===== */
    document.body.addEventListener('click',()=>bgm.play(),{once:true});

    /* ===== 5. PWA ç¦»çº¿ç¼“å­˜ ===== */
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>